var http=require("http"),url=require("url"),path=require("path"),fs=require("fs"),port=process.argv[2]||8e3,WHT="[39m",RED="[91m",GRN="[32m"
http.createServer(function(t,e){var r=url.parse(t.url).pathname,n=path.join(process.cwd(),r),s={".html":"text/html",".css":"text/css",".js":"text/javascript",".json":"text/json",".svg":"image/svg+xml"}
fs.exists(n,function(t){t?fs.statSync(n).isDirectory()&&(console.log(GRN+"FLDR: "+WHT+n),n+="/index.html"):(console.log(RED+"FAIL: "+n),n=path.join(process.cwd(),"/404.html")),fs.readFile(n,"binary",function(t,r){var o,i
return console.log(GRN+"FILE: "+WHT+n),t?(e.writeHead(500,{"Content-Type":"text/plain"}),e.write(t+"\n"),void e.end()):(o={},i=s[path.extname(n)],i&&(o["Content-Type"]=i),e.writeHead(200,o),e.write(r,"binary"),void e.end())})})}).listen(parseInt(port,10)),console.log(WHT+"Static file server running at\n  => http://localhost:"+port+"/\nCTRL + C to shutdown")
